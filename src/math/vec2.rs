use serde::{Deserialize, Serialize};
use std::ops::{Add, Mul, SubAssign};

#[derive(Debug, Copy, PartialEq, Clone, Serialize, Deserialize)]
pub struct Vec2 {
    pub x: f32,
    pub y: f32,
}

impl Vec2 {
  pub fn dot(&self, other: &Vec2) -> f32 {
      self.x * other.x + self.y * other.y
  }

  pub fn sqr_magnitude(&self) -> f32 {
      self.x * self.x + self.y * self.y
  }

  pub fn magnitude(&self) -> f32 {
      self.sqr_magnitude().sqrt()
  }

  pub fn normalize(&self) -> Vec2 {
      let len = 1.0 / self.magnitude();
      Vec2 {
          x: self.x * len,
          y: self.y * len,
      }
  }
}

impl Mul<f32> for Vec2 {
  type Output = Vec2;
  fn mul(self, rhs: f32) -> Vec2 {
    Vec2 { x: self.x * rhs, y: self.y * rhs }
  }
}

impl Add<Vec2> for Vec2 {
  type Output = Vec2;
  fn add(self, rhs: Vec2) -> Vec2 {
    Vec2 { x: self.x + rhs.x, y: self.y * rhs.y }
  }
}

impl SubAssign<Vec2> for Vec2 {
  fn sub_assign(&mut self, rhs: Vec2) {
    self.x -= rhs.x;
    self.y -= rhs.y;
  }
}